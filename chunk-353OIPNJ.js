import{D as f,Da as P,E as o,Ea as V,F as r,Fa as Z,G as d,Ga as _,Ha as q,I as y,Ka as z,O as n,R as b,W as I,X as j,f as h,fa as N,ga as g,ha as w,ia as x,ja as v,ka as E,la as T,m as F,ma as k,n as a,na as B,oa as G,p as L,pa as R,qa as A,ra as D,ta as H,va as O,w as C,x as m,y as M,z as l}from"./chunk-GTE3DQD6.js";var p=class t{constructor(e){this.http=e}url=`${D.apiUrl}/login`;login(e){return h(this.http.post(this.url,e))}static \u0275fac=function(i){return new(i||t)(L(j))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var K=()=>["/register"],s=class t{constructor(e,i,u,$,W){this.formBuilder=e;this.loginService=i;this.authService=u;this.toastService=$;this.loadingService=W}loginForm;ngOnInit(){this.loginForm=this.buildLoginForm()}login(){this.loginForm.valid&&(this.loadingService.changeLoadingState(!0),this.loginService.login(this.loginForm.value).then(e=>{this.authService.login(e),this.toastService.openSuccessToast("Zalogowano!")}).catch(e=>this.toastService.openErrorFromApiToast(e)).finally(()=>this.loadingService.changeLoadingState(!1)))}buildLoginForm(){return this.formBuilder.group({username:["",v.required],password:["",v.required]})}static \u0275fac=function(i){return new(i||t)(m(R),m(p),m(w),m(O),m(P))};static \u0275cmp=M({type:t,selectors:[["app-login"]],standalone:!1,decls:17,vars:3,consts:[[1,"d-flex","flex-column","align-items-center","mt-5",3,"ngSubmit","formGroup"],["matInput","","formControlName","username"],["matInput","","type","password","formControlName","password"],["mat-button",""],["mat-button","","type","button",3,"routerLink"]],template:function(i,u){i&1&&(o(0,"form",0),y("ngSubmit",function(){return u.login()}),o(1,"mat-form-field")(2,"mat-label"),n(3,"Nazwa u\u017Cytkownika"),r(),d(4,"input",1),o(5,"mat-error"),n(6,"Pole wymagane!"),r()(),o(7,"mat-form-field")(8,"mat-label"),n(9,"Has\u0142o"),r(),d(10,"input",2),o(11,"mat-error"),n(12,"Pole wymagane!"),r()(),o(13,"button",3),n(14,"Zaloguj si\u0119"),r(),o(15,"button",4),n(16,"Zarejestruj si\u0119"),r()()),i&2&&(f("formGroup",u.loginForm),C(15),f("routerLink",b(2,K)))},dependencies:[N,_,V,Z,q,H,k,x,E,T,B,G],styles:["form[_ngcontent-%COMP%]{gap:10px}"]})};var Q=[{path:"",pathMatch:"full",component:s}],c=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=l({type:t});static \u0275inj=a({imports:[g.forChild(Q),g]})};var U=class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=l({type:t});static \u0275inj=a({imports:[I,c,z,A]})};export{U as LoginModule};
